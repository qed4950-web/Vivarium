# 🌟 Smart Gardening AIoT + Roboflow  
## **Master Guideline (프로젝트 전체 핵심 기준)**  
모든 세부 문서(8개 MD 파일)보다 우선 적용되는 최상위 규칙입니다.

---

# 🎯 1. Accuracy First (정확도 최우선 원칙)
식물 병해·벌레·스트레스 판단은 **잘못된 제어로 이어질 수 있음** → 정확도 최우선.

### 목표 mAP 기준:
- plant_species ≥ 95%  
- plant_health ≥ 85%  
- plant_disease ≥ 75%  
- plant_pests ≥ 70%

⚠ 낮은 정확도의 모델은 절대 자동 제어에 바로 연결하지 않는다.

---

# ⚡ 2. Real-Time Reaction (실시간 반응)
AI 결정이 1~5초 늦어지면 의미가 없어짐.

### 기준
- 인퍼런스 속도 200ms ~ 1s  
- YOLO11n/YOLO8n 작은 모델 우선  
- 640 해상도 유지  
- 필요 시 crop inference 적용

---

# 🧼 3. Data Quality > Model Quality
Garbage In → Garbage Out.

### 데이터 품질 규칙:
- 라벨링 기준 반드시 준수  
- 클래스 밸런스 균등  
- 조명·배경·각도 다양성 확보  
- Annotation Heatmap 골고루 분포  
- 같은 이미지를 여러 클래스에 중복 라벨하지 않음

---

# 🧩 4. Tiling은 병해/벌레 모델의 필수 옵션
작은 객체 인식은 모델 구조보다 **Tiling이 더 효과적**임.

### 기준
- Tile: 640  
- Overlap: 20~25%  
- plant_disease / plant_pests 필수 적용  

---

# 🔌 5. AI 로직과 물리 제어는 분리한다 (중요)
AI 서버가 직접 펌프·LED 등을 제어하면 큰 사고 가능.

### 원칙:
- Python: 판단  
- ESP32: 행동  
- 제어 명령은 반드시 제한시간 포함  
- Safety Lock 필수

---

# 🛡 6. Safety First (안전 제어 규칙)
스마트 가드닝은 물/전기/식물이 동시에 존재 → 안전이 최우선.

### Safety 규칙:
- 펌프 제한시간 10초  
- 릴레이 반전 여부 확인  
- 모든 회로 공통 GND  
- 야간 자동 LED OFF (22~06시)  
- WiFi 끊김 시 MCU fallback 모드  
- 센서 오류 감지 시 즉시 중단

---

# 📸 7. Camera Quality is Everything
카메라가 구리면 모델 성능 30~50% 감소.

### 기준:
- 최소 1080p  
- 고정된 촬영 각도  
- 일정한 광량  
- 화분 전체가 프레임에 잡히도록 배치

---

# 🌿 8. Sensor Fusion (비전 + 센서 결합)
AI만으로는 판단 부족.  
센서만으로도 판단 부족.  
둘을 합쳐야 정확해짐.

### 예시:
- dry_leaf + 토양습도 낮음 → 급수  
- yellowing_leaf + 조도 낮음 → LED  
- leaf_mold + 습도 높음 → FAN

---

# 🧪 9. Continuous Learning (지속적 모델 개선)
현장 환경을 반영해 모델을 계속 개선해야 함.

### 기준:
- Roboflow Dataset Version 반드시 사용  
- 신규 이미지 지속 업데이트  
- 라벨 확인/수정  
- 2~3개월마다 재학습  
- 새로운 병해/벌레 class 확장 가능

---

# 🧱 10. Modular Architecture (모듈별 분리 설계)
전체 시스템은 아래 7개 모듈로 분리한다:

```
1) Vision Model  
2) Preprocessing  
3) Labeling Rules  
4) Inference Server  
5) Automation Engine  
6) MCU Control Layer  
7) Sensor Layer  
8) UI/Electron Layer
```

하나의 모듈이 실패해도 전체 시스템 안 멈추게 설계.

---

# 🔥 11. Low Power / Low Heat Optimization
실환경 설치 시스템은 발열과 전력 소모가 치명적.

### 규칙:
- YOLO11n/YOLO8n 사용  
- inference interval 최적화  
- Edge device에서 FP16  
- 필요 시 카메라 sleep 모드

---

# 📊 12. UX 기반 자동화 규칙
지속 가능한 서비스가 되려면 사용자가 편해야 함.

### UX 우선 규칙:
- 하루 1~2회 리포트  
- 병해 감지 즉시 알림  
- 자동화 로그 제공  
- 수동 제어 모드  
- 성장 그래프 시각화  
- 오작동 방지 프롬프트 적용

---

# 📌 Final Summary (최종 3대 원칙)
1. **정확해야 한다 (Accuracy First)**  
2. **즉시 반응해야 한다 (Real-time System)**  
3. **항상 안전해야 한다 (Safety First)**  

이 기준은 전체 8개 문서를 관통하며,  
시스템 개발·운영·확장 시 **반드시 최상위 원칙**으로 적용한다.





다음 파일:
📄 **01_전체개요.md**
