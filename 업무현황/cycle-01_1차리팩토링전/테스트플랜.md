# cycle-01 코드 스니펫 실행 체크리스트

## 환경 준비
- Python 3.10+ 가상환경
- ultralytics, fastapi, uvicorn, opencv-python, paho-mqtt, pyserial 설치
- 모델 가중치: `best.pt` (YOLO11/YOLOv8) 경로 필요
- 하드웨어: 웹캠 또는 테스트 이미지, ESP32(USB), MQTT 브로커(`192.168.x.x:1883`), HTTP 엔드포인트(ESP32 IP)

## 1) 학습 예제 (05)
- [ ] 명령: `python - <<'PY'\nfrom ultralytics import YOLO\nmodel = YOLO('yolo11s.pt')\nprint('ok')\nPY`
- 기대: 모델 로드 성공 로그. 실패 시 패키지/가중치 경로 기록.

## 2) 추론 + API (06)
- [ ] 명령: `uvicorn server:app --host 0.0.0.0 --port 8000` (best.pt 존재해야 함)
- 기대: 기동 후 샘플 이미지 POST 시 200 응답, 처리 시간 < 1s. temp 파일 자동 삭제 확인.

## 3) Serial 제어 (07)
- [ ] 명령: `python - <<'PY'\nimport serial\nser = serial.Serial('/dev/ttyUSB0', 115200, timeout=1)\nser.write(b'PUMP_ON:3000\\n')\nprint('sent')\nPY`
- 기대: ESP32에서 펌프 핀 HIGH 후 3초 뒤 LOW. 릴레이 반전 보드 여부 확인.

## 4) HTTP 제어 (07)
- [ ] 명령: `curl http://<esp32-ip>/pump/on`
- 기대: 200 응답, 펌프 ON/후속 OFF 호출 동작.

## 5) MQTT 제어 (07)
- [ ] 명령: `python - <<'PY'\nimport paho.mqtt.client as mqtt\nc = mqtt.Client()\nc.connect('192.168.0.10', 1883)\nc.publish('garden/pump', 'on')\nprint('sent')\nPY`
- 기대: ESP32 구독 후 모터/릴레이 ON 확인.

## 6) Roboflow Export/API 확인 (04)
- [ ] 명령: `pip install roboflow` 후 `python - <<'PY'\nfrom roboflow import Roboflow\nrf = Roboflow(api_key=\"<API_KEY>\")\nproject = rf.workspace().project(\"<project_slug>\")\ndataset = project.version(<version>).download(\"yolov8\")\nprint(dataset.location)\nPY`
- 기대: 버전 다운로드 성공, 경로 출력. API key/버전/slug 오류 시 메시지 기록.
- [ ] SDK 추론(Optional): `python - <<'PY'\nfrom roboflow import Roboflow\nrf = Roboflow(api_key=\"<API_KEY>\")\nproject = rf.workspace().project(\"<project_slug>\")\nmodel = project.version(<version>).model\nprint(model.predict(\"sample.jpg\").json())\nPY`
- 기대: JSON 결과 반환, latency 기록.

## 기록
- 각 테스트 결과/에러 로그를 `미완.md` → `완료.md` 이동 시 함께 기재.
